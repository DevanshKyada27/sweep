# Deploying your own Sweep instance via Docker

*ðŸŽ‰ We recently changed our license to the Elastic License V2 to allow Sweep for commercial usage.*<br/>You can self-host Sweep by deploying our Docker image at https://ghcr.io/sweepai/sweep.

## 0. Pre-requisites

You need an OpenAI API key, preferably with GPT-4 32k, and [GitHub developer mode](https://github.com/settings/apps).

You also need to install [Docker](https://docs.docker.com/engine/install/) to host Sweep.

## 1. Setting up the GitHub App

Register a new GitHub App, following this [guide](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app) with settings:

Permissions:

```
actions: read
check: read
contents: read & write
commit statuses: read & write
issues: read & write
metadata: read
pull requests: read & write
workflows: read & write
```

Webhook events:

```
issues
pull request
workflow run
check run
issue comment
label
pull request review
pull request review comment
pull request thread
status
workflow job
create
commit comment
check suite
push
```

Disable the webhook for now. You can use any URL for the homepage (e.g. repository URL). [Install the app](https://docs.github.com/en/apps/using-github-apps/installing-your-own-github-app) on your account or organization and generate a private key as per [this guide](https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/managing-private-keys-for-github-apps).

## 2. Running the Webhook

Now create the following `.env` file with the new secrets:

```sh
# Replace all newlines here with \n
GITHUB_APP_PEM="-----BEGIN RSA PRIVATE KEY-----xxxxxxxx...xxxxxxxx-----END RSA PRIVATE KEY-----"
# 6 digit ID
GITHUB_APP_ID=123456
# The name of your GitHub App
GITHUB_BOT_USERNAME=github-app-name

# Should start with "sk-"
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Set to true if you have access to 32k model
OPENAI_DO_HAVE_32K_MODEL_ACCESS=false
```

Then in the same directory as the `.env`, run

```bash
docker run --env-file .env -p 8000:8000 -d ghcr.io/sweepai/sweep:latest
```

## 3. Connecting the Webhook to the App

{/* <p style={{marginTop: 16, marginBottom: 32}}>
    <a href="https://cloud.digitalocean.com/apps/new?repo=https://github.com/sweepai/sweep/tree/main">
        <img src="https://www.deploytodo.com/do-btn-blue-ghost.svg" alt="Deploy to DO"/>
    </a>
</p>  */}

From here, you can either deploy the webhook locally or in production. For the rest of this guide, we'll assume you're serving locally using [Ngrok](https://ngrok.com/) for a reverse proxy.

Sign up for an Ngrok account and install the CLI from https://dashboard.ngrok.com/signup. Start the reverse proxy with `ngrok http 8000`. The second last line should say something like

```sh
Forwarding  https://4d8d8bf053be.ngrok.app -> http://localhost:8000
```

Append `/webhook` to the generate URL. In this case, your webhook URL will be `https://4d8d8bf053be.ngrok.app/webhook`.

With the webhook URL, go back to the GitHub Apps settings (`https://github.com/USERNAME/settings/apps/APP_NAME/advanced`) to populate the webhook URL field with this copied URL. Ensure SSL verification remains active.

## 4. Running Sweep

Finally, you can try out Sweep by going to "https://github.com/USERNAME/settings/apps/APP_NAME/installations" to install your repo to the app. You can then try out Sweep by creating a new issue with a title prefixed with `Sweep:`, like `Sweep: write unit tests for BaseIndex.tsx` and watch the magic happen!

For more details on using Sweep, see our [tutorial](https://docs.sweep.dev/usage/tutorial) and [advanced usage](https://docs.sweep.dev/usage/advanced) guides.

---

*There's additional configurable settings like Redis caching and GPU-accelerated embeddings that we use for our hosted product that we can document further for self-hosting. If this interests you please contact us at https://discord.gg/sweep.*
